<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="Cache-Control"
 content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />

<script type="text/javascript" src="/common/js/jquery-1.9.1.js"></script>
<script type="text/javascript" src="/common/js/jquery-ui.js"></script>
<script type="text/javascript" src="/common/js/bootstrap.js"></script>
<script type="text/javascript" src="/common/js/gl-matrix.js"></script>
<script type="text/javascript" src="/common/js/select2.min.js"></script>
<script type="text/javascript" src="/common/js/tween.min.js"></script>
<script type="text/javascript" src="/common/js/d3.v3.min.js"></script>
<script type="text/javascript" src="/common/js/proj4.js"></script>
<script type="text/javascript" src="/common/js/bootstrap-slider.min.js"></script>
<script type="text/javascript" src="/lib/vgl.min.js"></script>
<script type="text/javascript" src="/lib/geojs.min.js"></script>
<script type="text/javascript" src="timeseriesPlot.js"></script>
<script type="text/javascript" src="archive.js"></script>
<script type="text/javascript" src="mask.js"></script>
<script>
  function animateControlPanel(drawer, icon, panel) {
    // Animate control panel
    var collapsed = false;
    var defaultHeight = 0;

    drawer.hover(function() {
      $(this).addClass("hover");
    }, function() {
      $(this).removeClass("hover");
    });

    drawer.click(function() {
      if (collapsed === false) {
        defaultHeight = $(panel).height();
        $(panel).animate({
          height : 25
        }, 400, function() {
          $(icon).toggleClass('icon-chevron-down icon-chevron-up');
          collapsed = true;
        });
      } else {
        $(panel).animate({
          height : defaultHeight
        }, 400, function() {
          $(icon).toggleClass('icon-chevron-down icon-chevron-up');
          collapsed = false;
        });
      }
    });
  }

  function init() {
    animateControlPanel($('#drawer'), $('#collapse-icon'), $('#control-panel'))
    animateControlPanel($('#map-control-drawer'),
        $('map-control-collapse-icon'), $('#map-control-panel'))
  }
</script>
<link href="/common/css/jquery-ui.css" rel=stylesheet type=text/css>
<link href="/common/css/bootstrap.css" rel=stylesheet type=text/css>
<link href="/common/css/bootstrap-slider.min.css" rel=stylesheet
 type=text/css>
<link href="/common/css/select2.css" rel=stylesheet type=text/css>
<link href="/common/css/geoweb.css" rel=stylesheet type=text/css>
<link href="archive.css" rel=stylesheet type=text/css>
</head>
<body onload="archive.main()">
 <div class="navbar navbar-fixed-top" style="margin-bottom: 0px">
  <div class="navbar-inner">
   <a class="brand" href="/">ClimatePipes</a>
   <ul class="nav">
    <li class="active"><a href="#">ClimatePipes Archive</a></li>
   </ul>
   <div class="nav pull-right"
    style="padding-top: 10px; padding-right: 5px;">
    <a id=user-name class="dropdown-toggle" data-toggle="dropdown"
     href="#"> <span class="caret"></span>
    </a>
    <ul class="dropdown-menu" style='min-width: 0;'>
     <li><a id=logout href="#">Logout</a></li>
    </ul>
   </div>
  </div>

 </div>
 <div id=map style="width: 100%; height: 100%;">

  <div id=controls class=container-fluid style="position: absolute">

   <div class=row-fluid>
    <button id="draw-bbox" type="button"
     class="btn btn-default btn-small">
     <i class="icon-edit"></i>
    </button>
   </div>
   <div class=row-fluid style="padding-top: 10px; text-align: center;">
    <input id=depth-slider-input type="text" data-slider-id=depth-slider
     data-slider-min="0" data-slider-max="100" data-slider-step="1"
     data-slider-value="5" data-slider-orientation="vertical" />
   </div>
  </div>
  <canvas id="glcanvas" style="width: 100%; height: 100%;">

  </canvas>
 </div>
 <div id="map-info-box"></div>
 <div id="map-extra-info-box" class="extra-info">
  <button id="close-extra-info" class="close">&times;</button>
  <div id="map-extra-info-content"></div>
  <div id="map-timeseries"></div>
 </div>
</body>
<div id='esgf-login' class="modal hide fade">
 <div class="modal-header">
  <h3>Please enter ESGF credentials for download.</h3>
 </div>
 <div class="modal-body">
  <input id="user" type="text" style="width: 350px;"
   placeholder="OpenID identifier" required> <input id="user"
   type="text" style="width: 350px;" placeholder="OpenID identifier"
   required> <input id="password" type="password"
   class="input-small" placeholder="Password" required>
  <div id=message class=text-warning></div>
 </div>
 <div class="modal-footer">
  <button id=cancel class="btn" data-dismiss="modal">Cancel</button>
  <button id=download class="btn btn-primary" data-dismiss="modal">Download</button>
 </div>
</div>
<div id="error-dialog">
 <p id="text">
  <span class="ui-icon ui-icon-alert"
   style="float: left; margin: 0 7px 20px 0;"></span>
 </p>
</div>
<div id="workflow-dialog" class="modal hide fade">
 <div class="modal-header">
  <h3>Workflow Editor</h3>
 </div>
 <div class="modal-body">
  <div id="workflowEditor"></div>
 </div>
 <div class="modal-footer">
  <button id="delete-modules" class="btn pull-left">Delete</button>
  <button id="execute" class="btn" data-dismiss="modal">Execute</button>
  <button id="close-workflow" class="btn" data-dismiss="modal">Close</button>
 </div>
</div>
<div id="algorithm-dialog" class="modal hide fade">
 <div class="modal-header">
  <h3>Select an algorithm.</h3>
 </div>
 <div class="modal-body">
  <select id="algorithm-select"></select>
 </div>
 <div class="modal-footer">
  <button id="algorithm-ok" class="btn btn-primary" data-dismiss="modal">Ok</button>
 </div>
</div>
<div id="esgf-register-dialog" class="modal hide fade">
 <div class="modal-header">
  <h3>Please register for ESGF dataset</h3>
 </div>
 <div class="modal-body">
  <div class=row-fluid>To obtain access to these data, please
   register with one of the following groups:</div>
  <div class=row-fluid>
   <table id="esgf-register-table" class="table-hover">
    <thead>
     <tr>
      <th></th>
      <th class=table-heading-left>Group</th>
      <th class=table-heading-left>Role</th>
      <th class=table-heading-left>Site</th>
    </thead>
    <tbody id="esgf-register-table-body" data-container="body">
    </tbody>
   </table>
  </div>
 </div>
 <div class="modal-footer">
  <button id="esgf-register" class="btn btn-primary"
   data-dismiss="modal">Register</button>
 </div>
</div>
<div id=esgf-register-redirect class="modal hide">
 <div class="modal-dialog">
  <div class="modal-header">
   <button type="button" class="close" data-dismiss="modal">x</button>
   <h3>Please register directly with ESGF</h3>
  </div>
  <div class="modal-body">We where unable to register you with the
   selected groups. Please click below to open the ESGF registration
   page. Once registered please try the dataset again.</div>
  <div class="modal-footer">
   <button id=esgf-register-redirect-button type=button
    class="btn btn-primary">Open ESGF registration page</button>
  </div>
 </div>
</div>
<div id=error-modal class="modal hide">
 <div class="modal-dialog">
  <div class="modal-header">
   <button type="button" class="close" data-dismiss="modal">x</button>
   <h3>Internal Application Error</h3>
  </div>
  <div id=error-modal-body class="modal-body">
   <p id=error-modal-text class="text-warning"></p>
  </div>

 </div>
</div>

</html>
