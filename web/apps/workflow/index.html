<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>WireIt - ClimatePipes</title>
    <link rel="icon" href="examples/favicon.ico" type="image/png" />
    <link rel="SHORTCUT ICON" href="examples/favicon.ico" type="image/png" />

    <!-- YUI -->
    <!--
       <link rel="stylesheet" type="text/css" href="wireit/lib/yui/reset-fonts-grids/reset-fonts-grids.css" />
       <link rel="stylesheet" type="text/css" href="wireit/lib/yui/assets/skins/sam/skin.css" /> -->
    <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.9.0/build/reset-fonts-grids/reset-fonts-grids.css" />
    <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.9.0/build/assets/skins/sam/skin.css" />

    <!-- YUI DataTable -->
    <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.9.0/build/fonts/fonts-min.css" />
    <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.9.0/build/datatable/assets/skins/sam/datatable.css" />

    <!-- InputEx CSS -->
    <link type='text/css' rel='stylesheet' href='wireit/lib/inputex/css/inputEx.css' />

    <!-- YUI-accordion CSS -->
    <!--
       <link rel="stylesheet" type="text/css" href="wireit/lib/accordionview/assets/skins/sam/accordionview.css" /> -->
    <link rel="stylesheet" type="text/css" href="wireit/lib/accordionview/assets/skins/sam/accordionview.css" />

    <!-- WireIt CSS -->
    <link rel="stylesheet" type="text/css" href="wireit/css/WireIt.css" />
    <link rel="stylesheet" type="text/css" href="wireit/css/WireItEditor.css" />

    <style>
      #WiringEditor-runButton button {
        background: transparent url(wireit/images/icons/bullet_go.png) no-repeat scroll 10% 50%;
      }
      div.WireIt-Container {
  width: 350px; /* Prevent the modules from scratching on the right */
      }

      /*
      div.WireIt-Container.WiringEditor-module-Visualize,
      div.WireIt-Container.WiringEditor-module-ListData {
  width: 150px;
      }
      */

      div.WireIt-InputExTerminal {
  float: left;
  width: 21px;
  height: 21px;
  position: relative;
      }
      div.WireIt-InputExTerminal div.WireIt-Terminal {
  top: -3px;
  left: -7px;
      }
      div.inputEx-Group div.inputEx-label {
  width:100px;
      }

      div.WireIt-ImageContainer {
  width: auto;
      }

      div.Bubble div.body {
  width: 70px;
  height: 45px;
  opacity: 0.8;
  cursor: move;
      }

      .WiringEditor-module span {
  position: relative;
  top: -3px;
      }

  div.busy-wait {
    background:url(res/wheel.gif) no-repeat center center;
    height:50px;
    width:280px;
  }

    </style>

    <!-- YUI -->
    <!-- OLD YUI
       <script type="text/javascript" src="wireit/lib/yui/utilities/utilities.js"></script>
       <script type="text/javascript" src="wireit/lib/yui/resize/resize-min.js"></script>
       <script type="text/javascript" src="wireit/lib/yui/layout/layout-min.js"></script>
       <script type="text/javascript" src="wireit/lib/yui/container/container-min.js"></script>
       <script type="text/javascript" src="wireit/lib/yui/json/json-min.js"></script>
       <script type="text/javascript" src="wireit/lib/yui/button/button-min.js"></script>
       <script type="text/javascript" src="wireit/lib/yui/tabview/tabview-min.js"></script> -->

    <script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/utilities/utilities.js"></script>
    <script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/resize/resize-min.js"></script>
    <script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/layout/layout-min.js"></script>
    <script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/container/container-min.js"></script>
    <script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/json/json-min.js"></script>
    <script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/button/button-min.js"></script>
    <script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/tabview/tabview-min.js"></script>

    <!-- YUI DataTable -->
    <script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/yahoo-dom-event/yahoo-dom-event.js"></script>
    <script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/dragdrop/dragdrop-min.js"></script>
    <script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/element/element-min.js"></script>
    <script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/datasource/datasource-min.js"></script>
    <script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/event-delegate/event-delegate-min.js"></script>
    <script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/datatable/datatable-min.js"></script>

    <!-- InputEx with wirable options (WirableField-beta) -->
    <script src="wireit/lib/inputex/js/inputex.js"  type='text/javascript'></script>
    <script src="wireit/lib/inputex/js/Field.js"  type='text/javascript'></script>
    <script type="text/javascript" src="wireit/js/util/inputex/WirableField-beta.js"></script>
    <script src="wireit/lib/inputex/js/Group.js"  type='text/javascript'></script>
    <script src="wireit/lib/inputex/js/Visus.js"  type='text/javascript'></script>
    <script src="wireit/lib/inputex/js/fields/StringField.js"  type='text/javascript'></script>
    <script src="wireit/lib/inputex/js/fields/Textarea.js"  type='text/javascript'></script>
    <script src="wireit/lib/inputex/js/fields/SelectField.js"  type='text/javascript'></script>
    <script src="wireit/lib/inputex/js/fields/EmailField.js"  type='text/javascript'></script>
    <script src="wireit/lib/inputex/js/fields/UrlField.js"  type='text/javascript'></script>
    <script src="wireit/lib/inputex/js/fields/ListField.js"  type='text/javascript'></script>
    <script src="wireit/lib/inputex/js/fields/CheckBox.js"  type='text/javascript'></script>
    <script src="wireit/lib/inputex/js/fields/InPlaceEdit.js"  type='text/javascript'></script>
    <script src="wireit/lib/inputex/js/fields/PasswordField.js"  type='text/javascript'></script>
    <script src="wireit/lib/inputex/js/fields/DateField.js"  type='text/javascript'></script>
    <script src="wireit/lib/inputex/js/fields/IntegerField.js"  type='text/javascript'></script>
    <script src="wireit/lib/inputex/js/fields/HiddenField.js"  type='text/javascript'></script>

    <!-- YUI-Accordion -->
    <!--
       <script src="wireit/lib/accordionview/accordionview-min.js"  type='text/javascript'></script> -->
    <script src="wireit/lib/accordionview/accordionview-min.js"  type='text/javascript'></script>

    <!-- WireIt -->
    <!--[if IE]><script type="text/javascript" src="wireit/lib/excanvas.js"></script><![endif]-->
    <script type="text/javascript" src="wireit/js/WireIt.js"></script>
    <script type="text/javascript" src="wireit/js/CanvasElement.js"></script>
    <script type="text/javascript" src="wireit/js/Wire.js"></script>
    <script type="text/javascript" src="wireit/js/Terminal.js"></script>
    <script type="text/javascript" src="wireit/js/util/DD.js"></script>
    <script type="text/javascript" src="wireit/js/util/DDResize.js"></script>
    <script type="text/javascript" src="wireit/js/Container.js"></script>
    <script type="text/javascript" src="wireit/js/Layer.js"></script>
    <script type="text/javascript" src="wireit/js/util/inputex/FormContainer-beta.js"></script>
    <script type="text/javascript" src="wireit/js/LayerMap.js"></script>
    <script type="text/javascript" src="wireit/js/WiringEditor.js"></script>
    <script type="text/javascript" src="wireit/js/ImageContainer.js"></script>
    <script type="text/javascript" src="wireit/js/InOutContainer.js"></script>
    <script type="text/javascript" src="wireit/js/adapters/json-rpc.js"></script>

    <!-- CLIMATEPIPES MODULES -->
    <script type="text/javascript" src="modules/cpsimplified_modules.js"></script>
    <!--script type="text/javascript" src="modules/basic_modules.js"></script-->
    <!--script type="text/javascript" src="modules/http_modules.js"></script-->
    <!--script type="text/javascript" src="modules/esgf_modules.js"></script-->
    <!--script type="text/javascript" src="modules/climatepipes_modules.js"></script-->
    <script type="text/javascript" src="climatepipes.js"></script>


    <style>
      /* Comment Module */
      div.WireIt-Container.WiringEditor-module-comment { width: 200px; }
      div.WireIt-Container.WiringEditor-module-comment div.body { background-color: #EEEE66; }
      div.WireIt-Container.WiringEditor-module-comment div.body textarea { background-color: transparent; font-weight: bold; border: 0; }
    </style>


    <script>

      // InputEx needs a correct path to this image
      inputEx.spacerUrl = "/inputex/trunk/images/space.gif";

      YAHOO.util.Event.onDOMReady( climatePipes.init, climatePipes, true );

      /*
      YAHOO.util.Event.onDOMReady( function() {
        var editor = new WireIt.WiringEditor(climatePipes);

        // Open the infos panel
        editor.accordionView.openPanel(2);
      });
      */

    </script>

    <!-- Google Maps  -->
    <style type="text/css">
      #map-wrap{
          position:relative;
      }

      #map-canvas{
          position: relative;
          width:100%;
          height:100%;
          display: block;
      }

      #result-map{
          position: relative;
          display: block;
      }

      #rubber-band{
          position: relative;
          top: 10px;
          left: 10px;
          width: 50px;
          height: 30px;
          border: 1px solid #ff0000;
          background-color: transparent;
      }â€‹
    </style>

    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="hint-textbox.js"></script>
    <script type="text/javascript" src="jquery-1_7_1.js"></script>
    <script>
      var map;
      var dragging = false;
      var rect;
      var pos1, pos2;
      var latlng1, latlng2;

      $(document).ready(function() {
          initMap();
      });

      function initMap() {
          var latlng = new google.maps.LatLng(43, -89);
          var settings = {
              zoom: 5,
              center: latlng,
              mapTypeControl: true,
              mapTypeControlOptions: {
                  style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
              },
              navigationControl: true,
              navigationControlOptions: {
                  style: google.maps.NavigationControlStyle.SMALL
              },
              mapTypeId: google.maps.MapTypeId.SATELLITE
          }
          var mapElem = $("#map-canvas");
          map = new google.maps.Map(mapElem[0], settings);

          rect = new google.maps.Rectangle({
                      map: map
                  });

          google.maps.event.addListener(map, 'mousedown', function(mEvent) {
              map.draggable = false;
              latlng1 = mEvent.latLng;
              dragging = true;
              pos1 = mEvent.pixel;
          });

          google.maps.event.addListener(map, 'mousemove', function(mEvent) {
              latlng2 = mEvent.latLng;
              showRect();
          });

          google.maps.event.addListener(map, 'mouseup', function(mEvent) {
              map.draggable = true;
              dragging = false;
          });

          google.maps.event.addListener(rect, 'mouseup', function(data){
              map.draggable = true;
              dragging = false;

              var lat1 = latlng1.lat();
              var lat2 = latlng2.lat();
              var minLat = lat1<lat2?lat1:lat2;
              var maxLat = lat1<lat2?lat2:lat1;
              var lng1 = latlng1.lng();
              var lng2 = latlng2.lng();
              var minLng = lng1<lng2?lng1:lng2;
              var maxLng = lng1<lng2?lng2:lng1;

              boundsElement = document.getElementById('bounds');
              boundsElement.value = minLat + ',' + maxLat + ',' + minLng + ',' + maxLng;
          });
      }

      function showRect() {
          if(dragging){
              if (rect === undefined) {
                  rect = new google.maps.Rectangle({
                      map: map
                  });
              }
              // \NOTE Code duplication
              var lat1 = latlng1.lat();
              var lat2 = latlng2.lat();
              var minLat = lat1<lat2?lat1:lat2;
              var maxLat = lat1<lat2?lat2:lat1;
              var lng1 = latlng1.lng();
              var lng2 = latlng2.lng();
              var minLng = lng1<lng2?lng1:lng2;
              var maxLng = lng1<lng2?lng2:lng1;

              var minlatlng = new google.maps.LatLng(minLat,minLng);
              var maxlatlng = new google.maps.LatLng(maxLat,maxLng);

              var latLngBounds = new google.maps.LatLngBounds(minlatlng, maxlatlng);
              rect.setBounds(latLngBounds);
          }
      }

      function clearRect() {
        rect.setBounds(new google.maps.LatLngBounds(new google.maps.LatLng(0,0),
          new google.maps.LatLng(0,0)));
      }

      function clearForm() {
        date1 = document.getElementById('date1');
        date1.value = 'From (mm-dd-yy)';
        date2 = document.getElementById('date2');
        date2.value = 'To (mm-dd-yy)';
        bounds = document.getElementById('bounds');
        bounds.value = 'Region (minLat,maxLat,minLng,maxLng)';
        clearRect();
      }
    </script>

    <script src="/PWService/js/ParaViewWeb.js" type="text/javascript"></script>

  </head>

  <body class="yui-skin-sam" onUnload="finalizeParaview()">
    <!--TOP-------------------------------------------------------------------->
    <div id="top">
      <div class="logo">ClimatePipes</div>
      <div id="toolbar"></div>
      <div class="topright">
      </div>
    </div>

    <!--LEFT-------------------------------------------------------------------->
    <div id="left-all">
      <div id="left">
        <!-- Placeholder for modules -->
      </div>
      <div style='position: relative;'>
        <ul id="accordionView">
          <li>
            <h2>Minimap</h2>
            <div style='position: relative;'>
              <div id="layerMap"></div>
            </div>
          </li>
          <li>
            <h2>Infos</h2>
            <div>
              <div style="padding: 10px;">
                <p>This example shows how to use the <i>ImageContainer</i> and <i>FormContainer</i> in a language definition.</p>
                <br />
                <p><b>Drag and drop modules from the Module list</b> on the left to the working layer in the middle.</p>
                <br />
                <p><a href="climatepipes.js" target="_new">Click here to view the language definition for this editor.</a></p>
              </div>
            </div>
          </li>
        </ul>
     </div>
    </div>

    <!--RIGHT-------------------------------------------------------------------->
    <div id="right-all" style="height:100%">
      <div id="result-map" style="width:100%;height:50%"></div>
      <div id="result-list" style="width:100%;height:50%;overflow:scroll"></div>
      <!-- Placeholder for results -->
    </div>

    <!--CENTER-------------------------------------------------------------------->
    <div id="center-all" style="height:100%">
      <p>Search using pipes</p>
      <div id="center" style="height:45%"></div>
      <div id="maps" style="height:55%; margin-left:auto; margin-right: auto">
        <p>Search using location</p>
        <div id="map-wrap" style="height:75%;">
            <div id="map-canvas"></div>
        </div>
        <br>
        <form name="query" style="width:80%; margin-left:auto; margin-right: auto;">
	  <select id="selectSource">
	    <option>ESGFSource</option>
	    <option>KitwareSource</option>
	  </select>
          <input type="text" name="date1" id="date1" value="From (mm-dd-yy)" style="width:15%" class="hintTextbox" />
          <input type="text" name="date2" id="date2" value="To (mm-dd-yy)" style="width:15%" class="hintTextbox" />
          <input type="text" name="bounds" id="bounds" value="Region (minLat,maxLat,minLng,maxLng)"
           style="width:29.5%" class="hintTextbox" />
          <button type="button" name="clear" id="clearButton" onclick='clearForm()'>Clear</button>
          <br><br>
          <select id="selectView">
            <option>ListData</option>
            <option>Visualize</option>
          </select>
          <input type="text" id="search_text_input" name="search_text" style="width:50%" class="hintTextbox" value="Keywords"/>
	  <input type="text" id="numitems" name="numitems" style="width:10%" class="hintTextbox" value="# of Items"/>
          <button type="button" name="submit" id="submitButton" onclick="climatePipes.googleMapSubmit()">Submit</button>
        </form>
      </div>
    </div>

    <!--HELP-------------------------------------------------------------------->
  </body>
</html>
